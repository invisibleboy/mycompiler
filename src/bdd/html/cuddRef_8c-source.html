<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libbdd: cuddRef.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>cuddRef.c</h1><a href="cuddRef_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00036"></a>00036 <span class="comment">/* 10/29/02 REK Adding config.h */</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;config.h&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include    &lt;bdd/util.h&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include    &lt;bdd/cuddInt.h&gt;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00042"></a>00042 <span class="comment">/* Constant declarations                                                     */</span>
<a name="l00043"></a>00043 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00047"></a>00047 <span class="comment">/* Stucture declarations                                                     */</span>
<a name="l00048"></a>00048 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00052"></a>00052 <span class="comment">/* Type declarations                                                         */</span>
<a name="l00053"></a>00053 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00057"></a>00057 <span class="comment">/* Variable declarations                                                     */</span>
<a name="l00058"></a>00058 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="preprocessor">#ifndef lint</span>
<a name="l00061"></a><a class="code" href="cuddRef_8c.html#15755406c65f1ac3ea34ce661b57b54e">00061</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span> rcsid[] <a class="code" href="cuddInt_8h.html#d884f6728fb2a3fc752281d959f51d90">DD_UNUSED</a> = <span class="stringliteral">"$Id: cuddRef.c,v 1.1.1.1 2005/04/18 17:40:17 mchu Exp $"</span>;
<a name="l00062"></a>00062 <span class="preprocessor">#endif</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00064"></a>00064 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00065"></a>00065 <span class="comment">/* Macro declarations                                                        */</span>
<a name="l00066"></a>00066 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 
<a name="l00071"></a>00071 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00072"></a>00072 <span class="comment">/* Static function prototypes                                                */</span>
<a name="l00073"></a>00073 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00074"></a>00074 
<a name="l00078"></a>00078 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00079"></a>00079 <span class="comment">/* Definition of exported functions                                          */</span>
<a name="l00080"></a>00080 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00081"></a>00081 
<a name="l00094"></a>00094 <span class="keywordtype">void</span>
<a name="l00095"></a><a class="code" href="cuddRef_8c.html#3d0d9959640235fc073699c776914fca">00095</a> <a class="code" href="cuddRef_8c.html#3d0d9959640235fc073699c776914fca">Cudd_Ref</a>(
<a name="l00096"></a>00096   <a class="code" href="structDdNode.html">DdNode</a> * n)
<a name="l00097"></a>00097 {
<a name="l00098"></a>00098 
<a name="l00099"></a>00099     n = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(n);
<a name="l00100"></a>00100 
<a name="l00101"></a>00101     <a class="code" href="cuddInt_8h.html#820d3934f12d1a15066986d58e44d923">cuddSatInc</a>(n-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 } <span class="comment">/* end of Cudd_Ref */</span>
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 
<a name="l00119"></a>00119 <span class="keywordtype">void</span>
<a name="l00120"></a><a class="code" href="cuddRef_8c.html#0944d022761660bf481167b78759f599">00120</a> <a class="code" href="cuddRef_8c.html#0944d022761660bf481167b78759f599">Cudd_RecursiveDeref</a>(
<a name="l00121"></a>00121   <a class="code" href="structDdManager.html">DdManager</a> * table,
<a name="l00122"></a>00122   <a class="code" href="structDdNode.html">DdNode</a> * n)
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124     <a class="code" href="structDdNode.html">DdNode</a> *N;
<a name="l00125"></a>00125     <span class="keywordtype">int</span> ord;
<a name="l00126"></a>00126 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size save</span>
<a name="l00128"></a>00128 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size short</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span>    <a class="code" href="structDdNode.html">DdNode</a> **stack = table-&gt;<a class="code" href="structDdManager.html#f99ce33d5dcd3dcf67f10bd7da6a5aa5">stack</a>;
<a name="l00131"></a>00131 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size restore</span>
<a name="l00133"></a>00133 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00134"></a>00134 <span class="preprocessor"></span>    <span class="keywordtype">int</span> SP = 1;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136     N = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(n);
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="keywordflow">do</span> {
<a name="l00139"></a>00139 <span class="preprocessor">#ifdef DD_DEBUG</span>
<a name="l00140"></a>00140 <span class="preprocessor"></span>        <a class="code" href="util_8h.html#07d17d6d5d1074c0969bc5d3c3d1d84a">assert</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> != 0);
<a name="l00141"></a>00141 <span class="preprocessor">#endif</span>
<a name="l00142"></a>00142 <span class="preprocessor"></span>
<a name="l00143"></a>00143         <span class="keywordflow">if</span> (N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> == 1) {
<a name="l00144"></a>00144             N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> = 0;
<a name="l00145"></a>00145             table-&gt;<a class="code" href="structDdManager.html#170c1cfcbbd9b83bb479fc85c177c52e">dead</a>++;
<a name="l00146"></a>00146 <span class="preprocessor">#ifdef DD_STATS</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>            table-&gt;nodesDropped++;
<a name="l00148"></a>00148 <span class="preprocessor">#endif</span>
<a name="l00149"></a>00149 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (<a class="code" href="cuddInt_8h.html#a5cad999b2a4a3dbbfe5c1da1d8bc028">cuddIsConstant</a>(N)) {
<a name="l00150"></a>00150                 table-&gt;<a class="code" href="structDdManager.html#a8d293b6a4f69f6b4795e2fc24ede216">constants</a>.<a class="code" href="structDdSubtable.html#5f391dd3334a05f5e753d7df4da807bc">dead</a>++;
<a name="l00151"></a>00151                 N = stack[--SP];
<a name="l00152"></a>00152             } <span class="keywordflow">else</span> {
<a name="l00153"></a>00153                 ord = table-&gt;<a class="code" href="structDdManager.html#299d281a98c60aeec0e8edf6671a0f51">perm</a>[N-&gt;<a class="code" href="structDdNode.html#bbd39b25b9abe4b4d53cd267a4103bda">index</a>];
<a name="l00154"></a>00154                 stack[SP++] = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(<a class="code" href="cuddInt_8h.html#aef03f10591d8e28bb5fecd2aa7c93ff">cuddE</a>(N));
<a name="l00155"></a>00155                 table-&gt;<a class="code" href="structDdManager.html#835661f21be3f5d8944d76e22995be1f">subtables</a>[ord].<a class="code" href="structDdSubtable.html#5f391dd3334a05f5e753d7df4da807bc">dead</a>++;
<a name="l00156"></a>00156                 N = <a class="code" href="cuddInt_8h.html#09834c697b92ac296b1e50c863f88262">cuddT</a>(N);
<a name="l00157"></a>00157             }
<a name="l00158"></a>00158         } <span class="keywordflow">else</span> {
<a name="l00159"></a>00159             <a class="code" href="cuddInt_8h.html#a87dc1bc9890587b6f88a8afa9a68499">cuddSatDec</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00160"></a>00160             N = stack[--SP];
<a name="l00161"></a>00161         }
<a name="l00162"></a>00162     } <span class="keywordflow">while</span> (SP != 0);
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 } <span class="comment">/* end of Cudd_RecursiveDeref */</span>
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 
<a name="l00184"></a>00184 <span class="keywordtype">void</span>
<a name="l00185"></a><a class="code" href="cuddRef_8c.html#15905d5750b5f2f948329ce0f67a0fc8">00185</a> <a class="code" href="cuddRef_8c.html#15905d5750b5f2f948329ce0f67a0fc8">Cudd_IterDerefBdd</a>(
<a name="l00186"></a>00186   <a class="code" href="structDdManager.html">DdManager</a> * table,
<a name="l00187"></a>00187   <a class="code" href="structDdNode.html">DdNode</a> * n)
<a name="l00188"></a>00188 {
<a name="l00189"></a>00189     <a class="code" href="structDdNode.html">DdNode</a> *N;
<a name="l00190"></a>00190     <span class="keywordtype">int</span> ord;
<a name="l00191"></a>00191 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size save</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size short</span>
<a name="l00194"></a>00194 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00195"></a>00195 <span class="preprocessor"></span>    <a class="code" href="structDdNode.html">DdNode</a> **stack = table-&gt;<a class="code" href="structDdManager.html#f99ce33d5dcd3dcf67f10bd7da6a5aa5">stack</a>;
<a name="l00196"></a>00196 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size restore</span>
<a name="l00198"></a>00198 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00199"></a>00199 <span class="preprocessor"></span>    <span class="keywordtype">int</span> SP = 1;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     N = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(n);
<a name="l00202"></a>00202 
<a name="l00203"></a>00203     <span class="keywordflow">do</span> {
<a name="l00204"></a>00204 <span class="preprocessor">#ifdef DD_DEBUG</span>
<a name="l00205"></a>00205 <span class="preprocessor"></span>        <a class="code" href="util_8h.html#07d17d6d5d1074c0969bc5d3c3d1d84a">assert</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> != 0);
<a name="l00206"></a>00206 <span class="preprocessor">#endif</span>
<a name="l00207"></a>00207 <span class="preprocessor"></span>
<a name="l00208"></a>00208         <span class="keywordflow">if</span> (N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> == 1) {
<a name="l00209"></a>00209 <span class="preprocessor">#ifdef DD_DEBUG</span>
<a name="l00210"></a>00210 <span class="preprocessor"></span>            <a class="code" href="util_8h.html#07d17d6d5d1074c0969bc5d3c3d1d84a">assert</a>(!<a class="code" href="cuddInt_8h.html#a5cad999b2a4a3dbbfe5c1da1d8bc028">cuddIsConstant</a>(N));
<a name="l00211"></a>00211 <span class="preprocessor">#endif</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>            N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> = 0;
<a name="l00213"></a>00213             table-&gt;<a class="code" href="structDdManager.html#170c1cfcbbd9b83bb479fc85c177c52e">dead</a>++;
<a name="l00214"></a>00214 <span class="preprocessor">#ifdef DD_STATS</span>
<a name="l00215"></a>00215 <span class="preprocessor"></span>            table-&gt;nodesDropped++;
<a name="l00216"></a>00216 <span class="preprocessor">#endif</span>
<a name="l00217"></a>00217 <span class="preprocessor"></span>            ord = table-&gt;<a class="code" href="structDdManager.html#299d281a98c60aeec0e8edf6671a0f51">perm</a>[N-&gt;<a class="code" href="structDdNode.html#bbd39b25b9abe4b4d53cd267a4103bda">index</a>];
<a name="l00218"></a>00218             stack[SP++] = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(<a class="code" href="cuddInt_8h.html#aef03f10591d8e28bb5fecd2aa7c93ff">cuddE</a>(N));
<a name="l00219"></a>00219             table-&gt;<a class="code" href="structDdManager.html#835661f21be3f5d8944d76e22995be1f">subtables</a>[ord].<a class="code" href="structDdSubtable.html#5f391dd3334a05f5e753d7df4da807bc">dead</a>++;
<a name="l00220"></a>00220             N = <a class="code" href="cuddInt_8h.html#09834c697b92ac296b1e50c863f88262">cuddT</a>(N);
<a name="l00221"></a>00221         } <span class="keywordflow">else</span> {
<a name="l00222"></a>00222             <a class="code" href="cuddInt_8h.html#a87dc1bc9890587b6f88a8afa9a68499">cuddSatDec</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00223"></a>00223             N = stack[--SP];
<a name="l00224"></a>00224         }
<a name="l00225"></a>00225     } <span class="keywordflow">while</span> (SP != 0);
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 } <span class="comment">/* end of Cudd_IterDerefBdd */</span>
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 
<a name="l00243"></a>00243 <span class="keywordtype">void</span>
<a name="l00244"></a><a class="code" href="cuddRef_8c.html#08641a3718655a85000069cc58cdd172">00244</a> <a class="code" href="cuddRef_8c.html#08641a3718655a85000069cc58cdd172">Cudd_RecursiveDerefZdd</a>(
<a name="l00245"></a>00245   <a class="code" href="structDdManager.html">DdManager</a> * table,
<a name="l00246"></a>00246   <a class="code" href="structDdNode.html">DdNode</a> * n)
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248     <a class="code" href="structDdNode.html">DdNode</a> *N;
<a name="l00249"></a>00249     <span class="keywordtype">int</span> ord;
<a name="l00250"></a>00250 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00251"></a>00251 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size save</span>
<a name="l00252"></a>00252 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size short</span>
<a name="l00253"></a>00253 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span>    <a class="code" href="structDdNode.html">DdNode</a> **stack = table-&gt;<a class="code" href="structDdManager.html#f99ce33d5dcd3dcf67f10bd7da6a5aa5">stack</a>;
<a name="l00255"></a>00255 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size restore</span>
<a name="l00257"></a>00257 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00258"></a>00258 <span class="preprocessor"></span>    <span class="keywordtype">int</span> SP = 1;
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     N = n;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <span class="keywordflow">do</span> {
<a name="l00263"></a>00263 <span class="preprocessor">#ifdef DD_DEBUG</span>
<a name="l00264"></a>00264 <span class="preprocessor"></span>        <a class="code" href="util_8h.html#07d17d6d5d1074c0969bc5d3c3d1d84a">assert</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> != 0);
<a name="l00265"></a>00265 <span class="preprocessor">#endif</span>
<a name="l00266"></a>00266 <span class="preprocessor"></span>
<a name="l00267"></a>00267         <a class="code" href="cuddInt_8h.html#a87dc1bc9890587b6f88a8afa9a68499">cuddSatDec</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00268"></a>00268     
<a name="l00269"></a>00269         <span class="keywordflow">if</span> (N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> == 0) {
<a name="l00270"></a>00270             table-&gt;<a class="code" href="structDdManager.html#023bca6151c211d2d547da82a8f05d8b">deadZ</a>++;
<a name="l00271"></a>00271 <span class="preprocessor">#ifdef DD_STATS</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>            table-&gt;nodesDropped++;
<a name="l00273"></a>00273 <span class="preprocessor">#endif</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span><span class="preprocessor">#ifdef DD_DEBUG</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span>            <a class="code" href="util_8h.html#07d17d6d5d1074c0969bc5d3c3d1d84a">assert</a>(!<a class="code" href="cuddInt_8h.html#a5cad999b2a4a3dbbfe5c1da1d8bc028">cuddIsConstant</a>(N));
<a name="l00276"></a>00276 <span class="preprocessor">#endif</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span>            ord = table-&gt;<a class="code" href="structDdManager.html#a87aa500f809bac20002480f2cc7c2d8">permZ</a>[N-&gt;<a class="code" href="structDdNode.html#bbd39b25b9abe4b4d53cd267a4103bda">index</a>];
<a name="l00278"></a>00278             stack[SP++] = <a class="code" href="cuddInt_8h.html#aef03f10591d8e28bb5fecd2aa7c93ff">cuddE</a>(N);
<a name="l00279"></a>00279             table-&gt;<a class="code" href="structDdManager.html#7e75a8f45ea61dd45c34b114a0f22a34">subtableZ</a>[ord].<a class="code" href="structDdSubtable.html#5f391dd3334a05f5e753d7df4da807bc">dead</a>++;
<a name="l00280"></a>00280             N = <a class="code" href="cuddInt_8h.html#09834c697b92ac296b1e50c863f88262">cuddT</a>(N);
<a name="l00281"></a>00281         } <span class="keywordflow">else</span> {
<a name="l00282"></a>00282             N = stack[--SP];
<a name="l00283"></a>00283         }
<a name="l00284"></a>00284     } <span class="keywordflow">while</span> (SP != 0);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 } <span class="comment">/* end of Cudd_RecursiveDerefZdd */</span>
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 
<a name="l00303"></a>00303 <span class="keywordtype">void</span>
<a name="l00304"></a><a class="code" href="cuddRef_8c.html#1878b826a0a318e816d419ca5bcea97b">00304</a> <a class="code" href="cuddRef_8c.html#1878b826a0a318e816d419ca5bcea97b">Cudd_Deref</a>(
<a name="l00305"></a>00305   <a class="code" href="structDdNode.html">DdNode</a> * node)
<a name="l00306"></a>00306 {
<a name="l00307"></a>00307     node = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(node);
<a name="l00308"></a>00308     <a class="code" href="cuddInt_8h.html#a87dc1bc9890587b6f88a8afa9a68499">cuddSatDec</a>(node-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 } <span class="comment">/* end of Cudd_Deref */</span>
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 
<a name="l00331"></a>00331 <span class="keywordtype">int</span>
<a name="l00332"></a><a class="code" href="cuddRef_8c.html#0d388f1545438a43167bb55d6c432ef0">00332</a> <a class="code" href="cuddRef_8c.html#0d388f1545438a43167bb55d6c432ef0">Cudd_CheckZeroRef</a>(
<a name="l00333"></a>00333   <a class="code" href="structDdManager.html">DdManager</a> * manager)
<a name="l00334"></a>00334 {
<a name="l00335"></a>00335     <span class="keywordtype">int</span> <a class="code" href="cuddSign_8c.html#439227feff9d7f55384e8780cfc2eb82">size</a>;
<a name="l00336"></a>00336     <span class="keywordtype">int</span> i, j;
<a name="l00337"></a>00337     <span class="keywordtype">int</span> remain; <span class="comment">/* the expected number of remaining references to one */</span>
<a name="l00338"></a>00338 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size save</span>
<a name="l00340"></a>00340 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size short</span>
<a name="l00341"></a>00341 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00342"></a>00342 <span class="preprocessor"></span>    <a class="code" href="structDdNode.html">DdNode</a> **nodelist;
<a name="l00343"></a>00343     <a class="code" href="structDdNode.html">DdNode</a> *node;
<a name="l00344"></a>00344     <a class="code" href="structDdSubtable.html">DdSubtable</a> *subtable;
<a name="l00345"></a>00345 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00346"></a>00346 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size restore</span>
<a name="l00347"></a>00347 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00348"></a>00348 <span class="preprocessor"></span>    <span class="keywordtype">int</span> count = 0;
<a name="l00349"></a>00349     <span class="keywordtype">int</span> index;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     <span class="comment">/* First look at the BDD/ADD subtables. */</span>
<a name="l00352"></a>00352     remain = 1; <span class="comment">/* reference from the manager */</span>
<a name="l00353"></a>00353     size = manager-&gt;<a class="code" href="structDdManager.html#5fc169bc41431f1a0645f64c753457e3">size</a>;
<a name="l00354"></a>00354     remain += 2 * size; <span class="comment">/* reference from the BDD projection functions */</span>
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <span class="keywordflow">for</span> (i = 0; i &lt; size; i++) {
<a name="l00357"></a>00357         subtable = &amp;(manager-&gt;<a class="code" href="structDdManager.html#835661f21be3f5d8944d76e22995be1f">subtables</a>[i]);
<a name="l00358"></a>00358         nodelist = subtable-&gt;<a class="code" href="structDdSubtable.html#1226ea7ecfb6d6b56269cb518ac5e2d7">nodelist</a>;
<a name="l00359"></a>00359         for (j = 0; (unsigned) j &lt; subtable-&gt;slots; j++) {
<a name="l00360"></a>00360             node = nodelist[j];
<a name="l00361"></a>00361             <span class="keywordflow">while</span> (node != NULL) {
<a name="l00362"></a>00362                 <span class="keywordflow">if</span> (node-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> != 0 &amp;&amp; node-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> != <a class="code" href="cuddInt_8h.html#efc30efdf0ba59fd4152b3f62262f0d7">DD_MAXREF</a>) {
<a name="l00363"></a>00363                     index = (<span class="keywordtype">int</span>) node-&gt;<a class="code" href="structDdNode.html#bbd39b25b9abe4b4d53cd267a4103bda">index</a>;
<a name="l00364"></a>00364                     if (node != manager-&gt;<a class="code" href="structDdManager.html#70f75f877a9e8f1b7a1c219cd4675ce1">vars</a>[index]) {
<a name="l00365"></a>00365                         count++;
<a name="l00366"></a>00366                     } <span class="keywordflow">else</span> {
<a name="l00367"></a>00367                         <span class="keywordflow">if</span> (node-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> != 1) {
<a name="l00368"></a>00368                             count++;
<a name="l00369"></a>00369                         }
<a name="l00370"></a>00370                     }
<a name="l00371"></a>00371                 }
<a name="l00372"></a>00372                 node = node-&gt;<a class="code" href="structDdNode.html#9422352d3b46de31b325d1cf18b9f25f">next</a>;
<a name="l00373"></a>00373             }
<a name="l00374"></a>00374         }
<a name="l00375"></a>00375     }
<a name="l00376"></a>00376 
<a name="l00377"></a>00377     <span class="comment">/* Then look at the ZDD subtables. */</span>
<a name="l00378"></a>00378     <a class="code" href="cuddSign_8c.html#439227feff9d7f55384e8780cfc2eb82">size</a> = manager-&gt;sizeZ;
<a name="l00379"></a>00379     <span class="keywordflow">if</span> (<a class="code" href="cuddSign_8c.html#439227feff9d7f55384e8780cfc2eb82">size</a>) <span class="comment">/* references from ZDD universe */</span>
<a name="l00380"></a>00380         remain += 2;
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="cuddSign_8c.html#439227feff9d7f55384e8780cfc2eb82">size</a>; i++) {
<a name="l00383"></a>00383         subtable = &amp;(manager-&gt;subtableZ[i]);
<a name="l00384"></a>00384         nodelist = subtable-&gt;nodelist;
<a name="l00385"></a>00385         for (j = 0; (unsigned) j &lt; subtable-&gt;slots; j++) {
<a name="l00386"></a>00386             node = nodelist[j];
<a name="l00387"></a>00387             <span class="keywordflow">while</span> (node != NULL) {
<a name="l00388"></a>00388                 <span class="keywordflow">if</span> (node-&gt;ref != 0 &amp;&amp; node-&gt;ref != <a class="code" href="cuddInt_8h.html#efc30efdf0ba59fd4152b3f62262f0d7">DD_MAXREF</a>) {
<a name="l00389"></a>00389                     index = (<span class="keywordtype">int</span>) node-&gt;index;
<a name="l00390"></a>00390                     if (node == manager-&gt;univ[manager-&gt;permZ[index]]) {
<a name="l00391"></a>00391                         if (node-&gt;ref &gt; 2) {
<a name="l00392"></a>00392                             count++;
<a name="l00393"></a>00393                         }
<a name="l00394"></a>00394                     } <span class="keywordflow">else</span> {
<a name="l00395"></a>00395                         count++;
<a name="l00396"></a>00396                     }
<a name="l00397"></a>00397                 }
<a name="l00398"></a>00398                 node = node-&gt;next;
<a name="l00399"></a>00399             }
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401     }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <span class="comment">/* Now examine the constant table. Plusinfinity, minusinfinity, and</span>
<a name="l00404"></a>00404 <span class="comment">    ** zero are referenced by the manager. One is referenced by the</span>
<a name="l00405"></a>00405 <span class="comment">    ** manager, by the ZDD universe, and by all projection functions.</span>
<a name="l00406"></a>00406 <span class="comment">    ** All other nodes should have no references.</span>
<a name="l00407"></a>00407 <span class="comment">    */</span>
<a name="l00408"></a>00408     nodelist = manager-&gt;constants.nodelist;
<a name="l00409"></a>00409     <span class="keywordflow">for</span> (j = 0; (unsigned) j &lt; manager-&gt;constants.slots; j++) {
<a name="l00410"></a>00410         node = nodelist[j];
<a name="l00411"></a>00411         while (node != NULL) {
<a name="l00412"></a>00412             <span class="keywordflow">if</span> (node-&gt;ref != 0 &amp;&amp; node-&gt;ref != <a class="code" href="cuddInt_8h.html#efc30efdf0ba59fd4152b3f62262f0d7">DD_MAXREF</a>) {
<a name="l00413"></a>00413                 if (node == manager-&gt;one) {
<a name="l00414"></a>00414                     if ((<span class="keywordtype">int</span>) node-&gt;ref != remain) {
<a name="l00415"></a>00415                         count++;
<a name="l00416"></a>00416                     }
<a name="l00417"></a>00417                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (node == manager-&gt;zero ||
<a name="l00418"></a>00418                 node == manager-&gt;plusinfinity ||
<a name="l00419"></a>00419                 node == manager-&gt;minusinfinity) {
<a name="l00420"></a>00420                     if (node-&gt;ref != 1) {
<a name="l00421"></a>00421                         count++;
<a name="l00422"></a>00422                     }
<a name="l00423"></a>00423                 } <span class="keywordflow">else</span> {
<a name="l00424"></a>00424                     count++;
<a name="l00425"></a>00425                 }
<a name="l00426"></a>00426             }
<a name="l00427"></a>00427             node = node-&gt;next;
<a name="l00428"></a>00428         }
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430     <span class="keywordflow">return</span>(count);
<a name="l00431"></a>00431 
<a name="l00432"></a>00432 } <span class="comment">/* end of Cudd_CheckZeroRef */</span>
<a name="l00433"></a>00433 
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00436"></a>00436 <span class="comment">/* Definition of internal functions                                          */</span>
<a name="l00437"></a>00437 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 
<a name="l00451"></a>00451 <span class="keywordtype">void</span>
<a name="l00452"></a><a class="code" href="cuddRef_8c.html#cc19dbda07ed77727cd149f7aeb2527b">00452</a> <a class="code" href="cuddRef_8c.html#cc19dbda07ed77727cd149f7aeb2527b">cuddReclaim</a>(
<a name="l00453"></a>00453   <a class="code" href="structDdManager.html">DdManager</a> * table,
<a name="l00454"></a>00454   <a class="code" href="structDdNode.html">DdNode</a> * n)
<a name="l00455"></a>00455 {
<a name="l00456"></a>00456     <a class="code" href="structDdNode.html">DdNode</a> *N;
<a name="l00457"></a>00457     <span class="keywordtype">int</span> ord;
<a name="l00458"></a>00458 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size save</span>
<a name="l00460"></a>00460 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size short</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span>    <a class="code" href="structDdNode.html">DdNode</a> **stack = table-&gt;<a class="code" href="structDdManager.html#f99ce33d5dcd3dcf67f10bd7da6a5aa5">stack</a>;
<a name="l00463"></a>00463 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00464"></a>00464 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size restore</span>
<a name="l00465"></a>00465 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00466"></a>00466 <span class="preprocessor"></span>    <span class="keywordtype">int</span> SP = 1;
<a name="l00467"></a>00467     <span class="keywordtype">double</span> initialDead = table-&gt;<a class="code" href="structDdManager.html#170c1cfcbbd9b83bb479fc85c177c52e">dead</a>;
<a name="l00468"></a>00468 
<a name="l00469"></a>00469     N = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(n);
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 <span class="preprocessor">#ifdef DD_DEBUG</span>
<a name="l00472"></a>00472 <span class="preprocessor"></span>    <a class="code" href="util_8h.html#07d17d6d5d1074c0969bc5d3c3d1d84a">assert</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> == 0);
<a name="l00473"></a>00473 <span class="preprocessor">#endif</span>
<a name="l00474"></a>00474 <span class="preprocessor"></span>
<a name="l00475"></a>00475     <span class="keywordflow">do</span> {
<a name="l00476"></a>00476         <span class="keywordflow">if</span> (N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> == 0) {
<a name="l00477"></a>00477             N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> = 1;
<a name="l00478"></a>00478             table-&gt;<a class="code" href="structDdManager.html#170c1cfcbbd9b83bb479fc85c177c52e">dead</a>--;
<a name="l00479"></a>00479             <span class="keywordflow">if</span> (<a class="code" href="cuddInt_8h.html#a5cad999b2a4a3dbbfe5c1da1d8bc028">cuddIsConstant</a>(N)) {
<a name="l00480"></a>00480                 table-&gt;<a class="code" href="structDdManager.html#a8d293b6a4f69f6b4795e2fc24ede216">constants</a>.<a class="code" href="structDdSubtable.html#5f391dd3334a05f5e753d7df4da807bc">dead</a>--;
<a name="l00481"></a>00481                 N = stack[--SP];
<a name="l00482"></a>00482             } <span class="keywordflow">else</span> {
<a name="l00483"></a>00483                 ord = table-&gt;<a class="code" href="structDdManager.html#299d281a98c60aeec0e8edf6671a0f51">perm</a>[N-&gt;<a class="code" href="structDdNode.html#bbd39b25b9abe4b4d53cd267a4103bda">index</a>];
<a name="l00484"></a>00484                 stack[SP++] = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(<a class="code" href="cuddInt_8h.html#aef03f10591d8e28bb5fecd2aa7c93ff">cuddE</a>(N));
<a name="l00485"></a>00485                 table-&gt;<a class="code" href="structDdManager.html#835661f21be3f5d8944d76e22995be1f">subtables</a>[ord].<a class="code" href="structDdSubtable.html#5f391dd3334a05f5e753d7df4da807bc">dead</a>--;
<a name="l00486"></a>00486                 N = <a class="code" href="cuddInt_8h.html#09834c697b92ac296b1e50c863f88262">cuddT</a>(N);
<a name="l00487"></a>00487             }
<a name="l00488"></a>00488         } <span class="keywordflow">else</span> {
<a name="l00489"></a>00489             <a class="code" href="cuddInt_8h.html#820d3934f12d1a15066986d58e44d923">cuddSatInc</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00490"></a>00490             N = stack[--SP];
<a name="l00491"></a>00491         }
<a name="l00492"></a>00492     } <span class="keywordflow">while</span> (SP != 0);
<a name="l00493"></a>00493 
<a name="l00494"></a>00494     N = <a class="code" href="cudd_8h.html#fbbecf4f6f78f92518f4d0a477d870b6">Cudd_Regular</a>(n);
<a name="l00495"></a>00495     <a class="code" href="cuddInt_8h.html#a87dc1bc9890587b6f88a8afa9a68499">cuddSatDec</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00496"></a>00496     table-&gt;<a class="code" href="structDdManager.html#4ab47b179b205207c8e738f4b6ed1ebd">reclaimed</a> += initialDead - table-&gt;<a class="code" href="structDdManager.html#170c1cfcbbd9b83bb479fc85c177c52e">dead</a>;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498 } <span class="comment">/* end of cuddReclaim */</span>
<a name="l00499"></a>00499 
<a name="l00500"></a>00500 
<a name="l00512"></a>00512 <span class="keywordtype">void</span>
<a name="l00513"></a><a class="code" href="cuddRef_8c.html#dc39ed6aca9e7c16f7370bb373ed694b">00513</a> <a class="code" href="cuddRef_8c.html#dc39ed6aca9e7c16f7370bb373ed694b">cuddReclaimZdd</a>(
<a name="l00514"></a>00514   <a class="code" href="structDdManager.html">DdManager</a> * table,
<a name="l00515"></a>00515   <a class="code" href="structDdNode.html">DdNode</a> * n)
<a name="l00516"></a>00516 {
<a name="l00517"></a>00517     <a class="code" href="structDdNode.html">DdNode</a> *N;
<a name="l00518"></a>00518     <span class="keywordtype">int</span> ord;
<a name="l00519"></a>00519 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00520"></a>00520 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size save</span>
<a name="l00521"></a>00521 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size short</span>
<a name="l00522"></a>00522 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00523"></a>00523 <span class="preprocessor"></span>    <a class="code" href="structDdNode.html">DdNode</a> **stack = table-&gt;<a class="code" href="structDdManager.html#f99ce33d5dcd3dcf67f10bd7da6a5aa5">stack</a>;
<a name="l00524"></a>00524 <span class="preprocessor">#ifdef __osf__</span>
<a name="l00525"></a>00525 <span class="preprocessor"></span><span class="preprocessor">#pragma pointer_size restore</span>
<a name="l00526"></a>00526 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00527"></a>00527 <span class="preprocessor"></span>    <span class="keywordtype">int</span> SP = 1;
<a name="l00528"></a>00528 
<a name="l00529"></a>00529     N = n;
<a name="l00530"></a>00530 
<a name="l00531"></a>00531 <span class="preprocessor">#ifdef DD_DEBUG</span>
<a name="l00532"></a>00532 <span class="preprocessor"></span>    <a class="code" href="util_8h.html#07d17d6d5d1074c0969bc5d3c3d1d84a">assert</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> == 0);
<a name="l00533"></a>00533 <span class="preprocessor">#endif</span>
<a name="l00534"></a>00534 <span class="preprocessor"></span>
<a name="l00535"></a>00535     <span class="keywordflow">do</span> {
<a name="l00536"></a>00536         <a class="code" href="cuddInt_8h.html#820d3934f12d1a15066986d58e44d923">cuddSatInc</a>(N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00537"></a>00537 
<a name="l00538"></a>00538         <span class="keywordflow">if</span> (N-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a> == 1) {
<a name="l00539"></a>00539             table-&gt;<a class="code" href="structDdManager.html#023bca6151c211d2d547da82a8f05d8b">deadZ</a>--;
<a name="l00540"></a>00540             table-&gt;<a class="code" href="structDdManager.html#4ab47b179b205207c8e738f4b6ed1ebd">reclaimed</a>++;
<a name="l00541"></a>00541 <span class="preprocessor">#ifdef DD_DEBUG</span>
<a name="l00542"></a>00542 <span class="preprocessor"></span>            <a class="code" href="util_8h.html#07d17d6d5d1074c0969bc5d3c3d1d84a">assert</a>(!<a class="code" href="cuddInt_8h.html#a5cad999b2a4a3dbbfe5c1da1d8bc028">cuddIsConstant</a>(N));
<a name="l00543"></a>00543 <span class="preprocessor">#endif</span>
<a name="l00544"></a>00544 <span class="preprocessor"></span>            ord = table-&gt;<a class="code" href="structDdManager.html#a87aa500f809bac20002480f2cc7c2d8">permZ</a>[N-&gt;<a class="code" href="structDdNode.html#bbd39b25b9abe4b4d53cd267a4103bda">index</a>];
<a name="l00545"></a>00545             stack[SP++] = <a class="code" href="cuddInt_8h.html#aef03f10591d8e28bb5fecd2aa7c93ff">cuddE</a>(N);
<a name="l00546"></a>00546             table-&gt;<a class="code" href="structDdManager.html#7e75a8f45ea61dd45c34b114a0f22a34">subtableZ</a>[ord].<a class="code" href="structDdSubtable.html#5f391dd3334a05f5e753d7df4da807bc">dead</a>--;
<a name="l00547"></a>00547             N = <a class="code" href="cuddInt_8h.html#09834c697b92ac296b1e50c863f88262">cuddT</a>(N);
<a name="l00548"></a>00548         } <span class="keywordflow">else</span> {
<a name="l00549"></a>00549             N = stack[--SP];
<a name="l00550"></a>00550         }
<a name="l00551"></a>00551     } <span class="keywordflow">while</span> (SP != 0);
<a name="l00552"></a>00552 
<a name="l00553"></a>00553     <a class="code" href="cuddInt_8h.html#a87dc1bc9890587b6f88a8afa9a68499">cuddSatDec</a>(n-&gt;<a class="code" href="structDdNode.html#530470565dbead9303a714e120c35b70">ref</a>);
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 } <span class="comment">/* end of cuddReclaimZdd */</span>
<a name="l00556"></a>00556 
<a name="l00557"></a>00557 
<a name="l00558"></a>00558 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00559"></a>00559 <span class="comment">/* Definition of static functions                                            */</span>
<a name="l00560"></a>00560 <span class="comment">/*---------------------------------------------------------------------------*/</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Aug 30 17:58:07 2014 for libbdd by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
